{% extends "base.html" %}

{% block title %}
    {% if current_user.role == 'admin' %}Админ-панель
    {% elif current_user.role == 'seller' %}Панель продавца
    {% else %}Панель управления{% endif %}
{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- Заголовок с разными иконками и цветами -->
    <h1 class="mb-4">
        {% if current_user.role == 'admin' %}
            <i class="fas fa-crown text-danger"></i> Админ-панель
        {% elif current_user.role == 'seller' %}
            <i class="fas fa-store text-warning"></i> Панель продавца
        {% elif current_user.role == 'manager' %}
            <i class="fas fa-chart-line text-info"></i> Панель менеджера
        {% else %}
            <i class="fas fa-cog"></i> Панель управления
        {% endif %}
    </h1>
    
    <!-- Информационная карточка о правах -->
    <div class="card 
        {% if current_user.role == 'admin' %}border-danger
        {% elif current_user.role == 'seller' %}border-warning
        {% elif current_user.role == 'manager' %}border-info
        {% else %}border-primary{% endif %} mb-4">
        
        <div class="card-header 
            {% if current_user.role == 'admin' %}bg-danger text-white
            {% elif current_user.role == 'seller' %}bg-warning
            {% elif current_user.role == 'manager' %}bg-info text-white
            {% else %}bg-primary text-white{% endif %}">
            
            <h5 class="mb-0">
                {% if current_user.role == 'admin' %}
                    <i class="fas fa-shield-alt"></i> Полный административный доступ
                {% elif current_user.role == 'seller' %}
                    <i class="fas fa-boxes"></i> Доступ к управлению товарами
                {% elif current_user.role == 'manager' %}
                    <i class="fas fa-chart-bar"></i> Доступ к отчетам и аналитике
                {% else %}
                    <i class="fas fa-user"></i> Ограниченный доступ
                {% endif %}
            </h5>
        </div>
        
        <div class="card-body">
            <div class="row">
                <!-- Админ видит все карточки -->
                {% if current_user.role == 'admin' %}
                <div class="col-md-3 mb-4">
                    <div class="card text-white bg-primary">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h4>{{ products_count|default(0) }}</h4>
                                    <p>Товаров</p>
                                </div>
                                <i class="fas fa-box fa-2x"></i>
                            </div>
                            <a href="/admin/products" class="text-white">Управление →</a>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-3 mb-4">
                    <div class="card text-white bg-success">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h4>{{ categories_count|default(0) }}</h4>
                                    <p>Категорий</p>
                                </div>
                                <i class="fas fa-tags fa-2x"></i>
                            </div>
                            <a href="/admin/categories" class="text-white">Управление →</a>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-3 mb-4">
                    <div class="card text-white bg-warning">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h4>{{ orders_count|default(0) }}</h4>
                                    <p>Заказов</p>
                                </div>
                                <i class="fas fa-shopping-cart fa-2x"></i>
                            </div>
                            <a href="/admin/orders" class="text-white">Управление →</a>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-3 mb-4">
                    <div class="card text-white bg-info">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h4>{{ users_count|default(0) }}</h4>
                                    <p>Пользователей</p>
                                </div>
                                <i class="fas fa-users fa-2x"></i>
                            </div>
                            <a href="/admin/users" class="text-white">Управление →</a>
                        </div>
                    </div>
                </div>
                
                <!-- Продавец видит только товары и категории -->
                {% elif current_user.role == 'seller' %}
                <div class="col-md-4 mb-4">
                    <div class="card text-white bg-primary">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h4>{{ products_count|default(0) }}</h4>
                                    <p>Товаров</p>
                                </div>
                                <i class="fas fa-box fa-2x"></i>
                            </div>
                            <a href="/admin/products" class="text-white">Управление →</a>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4 mb-4">
                    <div class="card text-white bg-success">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h4>{{ categories_count|default(0) }}</h4>
                                    <p>Категорий</p>
                                </div>
                                <i class="fas fa-tags fa-2x"></i>
                            </div>
                            <a href="/admin/categories" class="text-white">Управление →</a>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4 mb-4">
                    <div class="card text-white bg-warning">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h4>{{ orders_count|default(0) }}</h4>
                                    <p>Заказов</p>
                                </div>
                                <i class="fas fa-shopping-cart fa-2x"></i>
                            </div>
                            <a href="/admin/orders" class="text-white">Просмотр →</a>
                        </div>
                    </div>
                </div>
                
                <!-- Менеджер видит товары, заказы и отчеты -->
                {% elif current_user.role == 'manager' %}
                <div class="col-md-4 mb-4">
                    <div class="card text-white bg-primary">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h4>{{ products_count|default(0) }}</h4>
                                    <p>Товаров</p>
                                </div>
                                <i class="fas fa-box fa-2x"></i>
                            </div>
                            <a href="/admin/products" class="text-white">Просмотр →</a>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4 mb-4">
                    <div class="card text-white bg-warning">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h4>{{ orders_count|default(0) }}</h4>
                                    <p>Заказов</p>
                                </div>
                                <i class="fas fa-shopping-cart fa-2x"></i>
                            </div>
                            <a href="/admin/orders" class="text-white">Анализ →</a>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4 mb-4">
                    <div class="card text-white bg-info">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h4><i class="fas fa-chart-bar"></i></h4>
                                    <p>Аналитика</p>
                                </div>
                                <i class="fas fa-chart-line fa-2x"></i>
                            </div>
                            <a href="/reports/" class="text-white">Отчеты →</a>
                        </div>
                    </div>
                </div>
                
                <!-- Обычный пользователь (на всякий случай) -->
                {% else %}
                <div class="col-12">
                    <div class="alert alert-info text-center">
                        <i class="fas fa-info-circle"></i> 
                        У вас ограниченные права доступа к админ-панели
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- Быстрые действия в зависимости от роли -->
    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">
                {% if current_user.role == 'admin' %}Быстрые действия
                {% elif current_user.role == 'seller' %}Управление товарами
                {% elif current_user.role == 'manager' %}Аналитика и отчеты
                {% else %}Действия{% endif %}
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                {% if current_user.role == 'admin' %}
                <!-- Админ - полный доступ -->
                <div class="col-md-3 mb-3">
                    <a href="/admin/products" class="btn btn-outline-primary w-100 py-3">
                        <i class="fas fa-plus fa-2x mb-2"></i><br>
                        Добавить товар
                    </a>
                </div>
                <div class="col-md-3 mb-3">
                    <a href="/admin/categories" class="btn btn-outline-success w-100 py-3">
                        <i class="fas fa-tag fa-2x mb-2"></i><br>
                        Категории
                    </a>
                </div>
                <div class="col-md-3 mb-3">
                    <a href="/admin/orders" class="btn btn-outline-warning w-100 py-3">
                        <i class="fas fa-shopping-cart fa-2x mb-2"></i><br>
                        Заказы
                    </a>
                </div>
                <div class="col-md-3 mb-3">
                    <a href="/reports/" class="btn btn-outline-info w-100 py-3">
                        <i class="fas fa-chart-bar fa-2x mb-2"></i><br>
                        Отчеты
                    </a>
                </div>
                
                {% elif current_user.role == 'seller' %}
                <!-- Продавец - управление товарами -->
                <div class="col-md-4 mb-3">
                    <a href="/admin/products" class="btn btn-outline-primary w-100 py-3">
                        <i class="fas fa-plus fa-2x mb-2"></i><br>
                        Новый товар
                    </a>
                </div>
                <div class="col-md-4 mb-3">
                    <a href="/admin/categories" class="btn btn-outline-success w-100 py-3">
                        <i class="fas fa-tags fa-2x mb-2"></i><br>
                        Категории
                    </a>
                </div>
                <div class="col-md-4 mb-3">
                    <a href="/admin/orders" class="btn btn-outline-warning w-100 py-3">
                        <i class="fas fa-list fa-2x mb-2"></i><br>
                        Заказы
                    </a>
                </div>
                
                {% elif current_user.role == 'manager' %}
                <!-- Менеджер - аналитика -->
                <div class="col-md-4 mb-3">
                    <a href="/reports/sales" class="btn btn-outline-primary w-100 py-3">
                        <i class="fas fa-chart-line fa-2x mb-2"></i><br>
                        Продажи
                    </a>
                </div>
                <div class="col-md-4 mb-3">
                    <a href="/reports/products" class="btn btn-outline-success w-100 py-3">
                        <i class="fas fa-box fa-2x mb-2"></i><br>
                        Товары
                    </a>
                </div>
                <div class="col-md-4 mb-3">
                    <a href="/reports/orders" class="btn btn-outline-info w-100 py-3">
                        <i class="fas fa-shopping-cart fa-2x mb-2"></i><br>
                        Заказы
                    </a>
                </div>
                
                {% else %}
                <!-- Обычный пользователь -->
                <div class="col-12 text-center">
                    <p class="text-muted">Нет доступных действий для вашей роли</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- Дополнительная информация по ролям -->
    {% if current_user.role == 'admin' %}
    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card border-danger">
                <div class="card-header bg-danger text-white">
                    <i class="fas fa-shield-alt"></i> Административные функции
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> Управление пользователями</li>
                        <li><i class="fas fa-check text-success"></i> Настройки системы</li>
                        <li><i class="fas fa-check text-success"></i> Полный доступ к данным</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card border-warning">
                <div class="card-header bg-warning">
                    <i class="fas fa-clock"></i> Последние действия
                </div>
                <div class="card-body">
                    <p class="text-muted">Здесь будет отображаться история действий...</p>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}